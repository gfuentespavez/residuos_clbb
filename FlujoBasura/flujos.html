<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Basura en Biob√≠o</title>

  <!-- Mapbox & Bootstrap -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="flujos.css" rel="stylesheet">
</head>

<body>
<div class="container-fluid">
  <div class="row">

    <!-- üî∑ Left Panel -->
    <div class="col-md-3 bg-dark text-white vh-100 p-3 overflow-auto">

      <!-- Section 1: Branding -->
      <div class="text-center mb-4">
        <img src="./assets/citylab-logo.png" alt="City Lab Biob√≠o" class="img-fluid mb-2" style="max-width: 150px;">
        <p class="small" style="text-align: left;">
          <br>
          Visualizaci√≥n interactiva de flujos de residuos entre comunas y rellenos sanitarios.
        </p>
      </div>

      <!-- Section 2: Filters -->
      <div class="mb-4">
        <h6 class="fw-bold text-uppercase">Filtros de Visualizaci√≥n</h6>

        <label class="form-label">Rellenos sanitarios</label>
        <div class="d-grid gap-2">
          <div class="form-check form-switch text-light">
            <input class="form-check-input" type="checkbox" value="Relleno Cemarc Penco">
            <label class="form-check-label">Cemarc Penco</label>
          </div>
          <div class="form-check form-switch text-light">
            <input class="form-check-input" type="checkbox" value="Relleno Los √Ångeles">
            <label class="form-check-label">Los √Ångeles</label>
          </div>
          <div class="form-check form-switch text-light">
            <input class="form-check-input" type="checkbox" value="Relleno Fundo Las Cruces">
            <label class="form-check-label">Fundo Las Cruces</label>
          </div>
          <div class="form-check form-switch text-light">
            <input class="form-check-input" type="checkbox" value="Vertedero Licura">
            <label class="form-check-label">Licura</label>
          </div>
          <div class="form-check form-switch text-light">
            <input class="form-check-input" type="checkbox" value="Relleno Sanitario Arauco Curanilahue">
            <label class="form-check-label">Arauco Curanilahue</label>
          </div>
        </div>

        <label class="form-label mt-3">Comunas asociadas</label>
        <div id="comunaList" class="comuna-tag-container"></div>

      </div>

      <!-- Section 3: Info + Chart -->
      <div>
        <h6 class="fw-bold text-uppercase">Informaci√≥n</h6>
        <p id="comunaSummaryText" class="small">
          Visualizando comunas que env√≠an residuos a <span id="rellenoNameText">[relleno]</span>.
        </p>

        <div class="mb-2">
          <strong>Total toneladas:</strong>
          <div class="fs-4 text-info" id="toneladasCounter">0</div>
        </div>
      </div>
    </div>

    <!-- üî∂ Right Map Container -->
    <div class="col-md-9 p-0 position-relative" style="z-index: 0;">
      <div class="position-absolute top-0 start-0 w-100 h-100">
        <div id="map" class="w-100 h-100" style="z-index: 0;"></div>
        <canvas id="flow" class="position-absolute top-0 start-0 w-100 h-100" style="pointer-events: none; z-index: 1;"></canvas>
        <div id="label-container" class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 2;"></div>
      </div>
    </div>
  </div>
</div>

<!-- üîó Scripts -->
<script type="module" src="main.js"></script>
<script type="module" src="panel.js"></script>
</body>
</html>